# TanGo: A Cost Optimization Framework for Tenant Task Placement in Geo-distributed Clouds

## 研究背景

地理分布式的云基础设施具有：电价区域多样性、租户的访问延迟和任务之间的流量需求的三个特征。然而，现有的工作忽略了电价的区域差异或地理分布式云中的租户需求，导致运营成本增加或用户QoS降低。基于此，文章设计了一种用于在地理分布式云钟放置租户任务的成本优化框架，TanGo

- 将电力成本最小化的任务布置问题建模为带约束的混合整数非线性规划问题
- 使用基于子模（submodular-based）提出具有紧密近似比 $1-1/e$ 的近最优算法

为了弥补这一差距，我们设计了一个成本优化框架，用于在地理分布式云中放置租户任务，称为TanGo。



## 研究问题

云上由于日益增长的区域租户任务所消耗的电力成本在快速增长，占整体运营成本的60%-70%。**是否可能以跨区域的方式安排和放置租户任务，在满足租户/应用的期望要求时显着降低总体电力成本?**

三个耦合因素导致在多区域多租户云中实现高效的任务放置问题困难

- 电价的区域多样性
- 租户访问延迟：指部署在云中的客户端与租户应用程序/服务之间的往返访问延迟。延迟要求取决与租户任务类型，时间敏感型和时间不敏感型
- 任务之间的流量需求：同一租户下多个任务间所需的时延/带宽，取决于租户任务类型，比如任务之间的高流量和数据中心之间有限的带宽容量的矛盾

现有工作

- 忽略了云的区域差异或租户对任务的需求，导致运营成本增加或用户服务质量降低。例如，已有的任务布置方案，通过利用多个地区之间的电价差异来最小化总电力成本。然而，这些工作**忽略了任务之间的各种流量需求**。
- 若应用程序对任务间的通信要求高时，一般将任务放在同一区域
- 忽视传输需求可能会导致更高的运营成本

TanGo 优化框架的提出，租户可以指定他们对任务的各种需求，云提供商以经济有效的方式放置租户任务，TanGo的核心时一种近乎最优的任务分配算法，它可以在满足所有需求和约束的同时最小化总成本：

- TanGo，在满足不同需求的同时最小化电力成本
- 将任务布置问题表述为一个混合整数非线性优化问题，并给出基于子模块(submodular-based)的解决方案，并证明算法性质

实际中公有云的任务放置策略

- 最低延迟优先，租户选择访问延迟最低的区域放置任务
- 最低成本优先：云提供商选择电价最低的区域并满足租户的接入延迟需求
- 上述两种策略会将来自租户的任务放置在同一区域，以满足流量需求

放置租户任务的时延需求：每个任务的访问时延需求以及任务间的时延需求；租户与区域的时延；区域与区域的时延，在满足租户需求的前提下，将一个租户的任务分配到不同的区域，可以比其他方法节省更多的成本——中国东数西算工程



## 研究方法

论文所提出的TanGo框架有两部分组成：

- 控制平面
  - 状态收集器：收集区域的状态信息，如区域拓扑、电价
  - 布局优化器：云提供商可以利用详细信息和租户需求，通过布局优化器做出最佳布局决策
- 数据平面：由分布在不同区域的数据中心组成，租户可以在不指定位置的情况下指定其所有任务或任务子集的各种需求

**模型描述**

最小化区域总电力成本

![image-20230617174540197](C:\Users\苏铄淼\AppData\Roaming\Typora\typora-user-images\image-20230617174540197.png)

约束描述

- 任务放置约束
- 接入延迟约束
- 流量延迟约束
- 区域带宽约束
- 计算能力约束

通过将任务放置在$K=|R|$区域下并将任务根据区域划分为K个集合，即 $I_1,\cdots,I_K$，将原问题转化为下述问题。

![image-20230617180030516](C:\Users\苏铄淼\AppData\Roaming\Typora\typora-user-images\image-20230617180030516.png)

**算法设计**

子模块：使用访问延迟需求确定该区域是否可用。在确定任务的放置位置后，根据任务之间的传输需求更新每个任务的可用集。文中所提出的算法基于子模集合函数H的高效计算，它通过将任务划分为几个集合来定义最大的成本降低。

算法步骤：

- 第一步：算法提前计算出每个任务的可用区域集和每个区域的可行任务集
- 第二步：循环遍历每个区域的可能可行任务集S，求出函数最大值。在每次迭代结束时，将子模函数值最大的可行任务集S添加到Φ中，根据更新的可用区域集更新每个任务的可用区域集和每个区域的可行任务集。该算法执行K−1次迭代，直到我们在Φ中获得K组任务。
- 第三步：获得任务和区域之间的映射关系

![image-20230617193152322](C:\Users\苏铄淼\AppData\Roaming\Typora\typora-user-images\image-20230617193152322.png)



## 研究结论

本文探讨了区域分布式任务布置所面临的挑战，提出了地理分布式云环境下任务布置的电力成本最小化问题。然后提出了一种有效的基于子模的算法，该算法具有紧密近似比(1−1/e)的近最优算法。最后论文进行了基于真实世界数据集的深度模拟时延，结果显示了文中算法的有效性，并且与常用的替代方案相比，总体上减少了10%-30%的电费

